{"version":3,"sources":["../../src/lib/graphql.js"],"names":["stringifyId","doc","_id","toString","prepareMongooseDoc","result","fields","Array","isArray","map","item","_doc","fieldName","reduce","preparedDoc","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,WAAW,GAAG,SAAdA,WAAc,CAAAC,GAAG,EAAI;AACzB,2BAAaA,GAAb;AAAkBC,IAAAA,GAAG,EAAED,GAAG,CAACC,GAAJ,CAAQC,QAAR;AAAvB;AACD,CAFD;;AAIA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,MAAD,EAAyB;AAAA,MAAhBC,MAAgB,uEAAP,EAAO;AAClD,MAAIC,KAAK,CAACC,OAAN,CAAcH,MAAd,CAAJ,EAA2B,OAAOA,MAAM,CAACI,GAAP,CAAW,UAAAC,IAAI;AAAA,WAAIV,WAAW,CAACU,IAAI,CAACC,IAAN,CAAf;AAAA,GAAf,CAAP;AAE3B,SAAOL,MAAM,CACVG,GADI,CACA,UAAAG,SAAS;AAAA,WAAK,CAACA,SAAD,EAAYR,kBAAkB,oBAAKC,MAAM,CAACO,SAAD,CAAX,EAA9B,CAAL;AAAA,GADT,EAEJC,MAFI,CAEG,UAACZ,GAAD,QAAmC;AAAA;AAAA,QAA5BW,SAA4B;AAAA,QAAjBE,WAAiB;;AACzCb,IAAAA,GAAG,CAACW,SAAD,CAAH,GAAiBE,WAAjB;AACA,WAAOb,GAAP;AACD,GALI,EAKFD,WAAW,CAACK,MAAM,CAACM,IAAR,CALT,CAAP;AAMD,CATD;;AAWAI,MAAM,CAACC,OAAP,GAAiB;AACfZ,EAAAA,kBAAkB,EAAlBA;AADe,CAAjB","sourcesContent":["const stringifyId = doc => {\n  return ({ ...doc, _id: doc._id.toString() })\n}\n\nconst prepareMongooseDoc = (result, fields = []) => {\n  if (Array.isArray(result)) return result.map(item => stringifyId(item._doc));\n\n  return fields\n    .map(fieldName => ([fieldName, prepareMongooseDoc([...result[fieldName]])]))\n    .reduce((doc, [fieldName, preparedDoc]) => {\n      doc[fieldName] = preparedDoc;\n      return doc;\n    }, stringifyId(result._doc));\n}\n\nmodule.exports = {\n  prepareMongooseDoc\n}\n"],"file":"graphql.js"}