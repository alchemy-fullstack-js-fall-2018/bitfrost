{"version":3,"sources":["../../src/resources/schema.js"],"names":["require","Person","PersonType","prepareMongooseDoc","GraphQLNonNull","GraphQLObjectType","GraphQLInputObjectType","GraphQLList","GraphQLSchema","GraphQLString","GraphQLID","GraphQLInt","prepareObj","obj","graphql","prepare","Array","isArray","map","Queries","name","description","fields","person","type","args","id","resolve","_","findById","then","people","find","Mutations","createPerson","email","phone","address","street","city","state","zip","formatted","create","Schema","query","mutation","module","exports"],"mappings":"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","sourcesContent":["const { Person, PersonType } = require('./people/People');\nconst { prepareMongooseDoc } = require('../lib/graphql');\nconst {\n  GraphQLNonNull,\n  GraphQLObjectType,\n  GraphQLInputObjectType,\n  GraphQLList,\n  GraphQLSchema,\n  GraphQLString,\n  GraphQLID,\n  GraphQLInt\n} = require('graphql');\n\nconst prepareObj = obj => {\n  if (typeof obj.graphql === 'function') return obj.graphql();\n\n  return prepareMongooseDoc(obj);\n}\n\nconst prepare = obj => {\n  if (Array.isArray(obj)) return obj.map(prepareObj);\n  return prepareObj(obj);\n};\n\nconst Queries = new GraphQLObjectType({\n  name: 'RootQueries',\n  description: 'My root queries',\n  fields: () => ({\n    person: {\n      description: 'retrieves a person',\n      type: PersonType,\n      args: { id: { type: GraphQLID } },\n      resolve: (_, { id }) => Person.findById(id).then(prepare)\n    },\n    people: {\n      description: 'retrieves a list of people',\n      type: new GraphQLList(PersonType),\n      resolve: () => Person.find().then(prepare)\n    }\n  })\n});\n\nconst Mutations = new GraphQLObjectType({\n  name: 'Mutations',\n  description: 'Root mutations',\n  fields: () => ({\n    createPerson: {\n      description: 'Create a new person',\n      type: PersonType,\n      args: {\n        name: { type: new GraphQLNonNull(GraphQLString) },\n        email: { type: new GraphQLNonNull(GraphQLString) },\n        phone: { type: new GraphQLNonNull(GraphQLString) },\n        address: {\n          street: { type: GraphQLString },\n          city: { type: GraphQLString },\n          state: { type: GraphQLString },\n          zip: { type: new GraphQLNonNull(GraphQLInt) },\n          formatted: {\n            type: GraphQLString,\n            resolve(obj) {\n              return obj.street + obj.city + obj.state + obj.zip\n            }\n          }\n        },\n      },\n      resolve: (_, { name, email, phone, address }) => Person.create({ name, email, phone, address }).then(prepare)\n    }\n  })\n});\n\nconst Schema = new GraphQLSchema({\n  query: Queries,\n  mutation: Mutations\n});\n\nmodule.exports = Schema;\n"],"file":"schema.js"}